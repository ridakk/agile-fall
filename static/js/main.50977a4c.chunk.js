(this["webpackJsonpagile-fall"]=this["webpackJsonpagile-fall"]||[]).push([[0],{1653:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(178),r=n(1707),i=n(1706),o=n(22),s=n(21),l=n(0),d=n.n(l),u=n(14),j=n.n(u),b=(n(204),n(132)),f=n(18),O=n(24),h=n(1701),p=n(1702),x=n(1705),m=n(1703),g=n(1704),v=n(1717),y=n(1713),k=n(1694),C=n(1693),D=n(1699),I=n(60),S=n(176),w=n.n(S),B=n(177),F=n.n(B),E=n(56),P=n(78),R=n(102),T=n(164),A=n.n(T),M=n(129),W=n.n(M),L=n(38),N=n(108),G=(n(295),n(1655)),z=n(1689),J=n(58),_=n.n(J),q=n(169),H=n.n(q),K=n(170),Q=n.n(K),V=n(168),Z=n.n(V);var $=function(e){var t=e.handleSettings,n=e.handleGenerateReport,c=e.takeScreenshot,r=e.handleNewTask;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(z.a,{disableElevation:!0,variant:"contained",style:{marginBottom:"20px"},children:[Object(a.jsx)(G.a,{startIcon:Object(a.jsx)(Z.a,{}),onClick:t,children:"Settings"}),Object(a.jsx)(G.a,{startIcon:Object(a.jsx)(H.a,{}),onClick:n,children:"Text Report"}),Object(a.jsx)(G.a,{startIcon:Object(a.jsx)(Q.a,{}),onClick:c,children:"Screenshot"}),Object(a.jsx)(G.a,{startIcon:Object(a.jsx)(_.a,{}),onClick:r,children:"Add Task"})]})})},U=n(171),X=Object(l.createContext)({links:[],setLinks:function(){}}),Y=Object(l.createContext)({rows:[],setRows:function(){}}),ee="#cbdadb",te={"Back-End":"be","Front-End":"fe",QA:"qa"},ne={technical_task:"tech"};var ae=function(){var e=Object(l.useContext)(Y),t=e.rows,n=e.setRows,c=Object(l.useContext)(X),r=c.links,i=c.setLinks;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(U.a,{onDrop:function(e){e.pop();var a=e.shift().data,c=a.findIndex((function(e){return"Issue key"===e})),o=a.findIndex((function(e){return"Issue id"===e})),l=a.findIndex((function(e){return"Summary"===e})),d=a.findIndex((function(e){return"Parent id"===e})),u=a.findIndex((function(e){return"\u03a3 Original Estimate"===e})),j=a.map((function(e,t){return"Components"===e?t:""})).filter(String),b=a.map((function(e,t){return"Labels"===e?t:""})).filter(String),f=a.map((function(e,t){return e.includes("(Gantt End to End)")?t:""})).filter(String),O=a.map((function(e,t){return e.includes("(Gantt End to Start)")?t:""})).filter(String),h=["#A8E6CF","#DCEDC1","#FFD3B6","#FFAAA5","#FF8B94","#EBD4CB","#8CBEB2","#F2EBBF","#F3B562","#BEBF95","#8C2B59","#BEBF95","#F5EB67","#88F7E2","#FFFFCB"],p=e.reduce((function(e,t){var n=t.data[d];return""===n||(e[n]?e[n]===ee&&(e[n]=h.shift()):e[n]=ee),e}),{}),x=Object(s.c)(r,(function(t){e.forEach((function(e){var n=e.data;f.forEach((function(e){""!==n[e]&&(t.find((function(e){return e.key===n[c]}))||(t.push({key:n[c],text:"has to be finished together",issue:n[e]}),t.push({key:n[e],text:"has to be finished together",issue:n[c]})))})),O.forEach((function(e){""!==n[e]&&(t.find((function(e){return e.key===n[c]}))||(t.push({key:n[c],text:"has to be done before",issue:n[e]}),t.push({key:n[e],text:"has to be done after",issue:n[c]})))}))}))})),m=Object(s.c)(t,(function(t){var n=t.findIndex((function(e){return"Task Bucket"===e.name})),a=t[n],r=function(e){return j.reduce((function(t,n){var a=te[e[n]];return a?(t.push(a),t):t}),[])},i=function(e){return b.reduce((function(t,n){var a=ne[e[n]];return a?(t.push(a),t):t}),[])};e.forEach((function(e){var n,s=e.data,j=s[o]||Object(L.a)(),b=s[c]||Object(L.a)(),f=s[d],O=p[f],h=s[l],x=(n=s[u]/28800)<.5?.5:Math.round(2*n)/2,m=t.find((function(e){return e.list.find((function(e){return e.key===b}))}));if(m){var g=m.list.find((function(e){return e.key===b}));return g.parentId=f,g.summary=h,g.estimate=x,g.backgroundColor=O,g.components=r(s),void(g.labels=i(s))}a.list.push({id:j,key:b,parentId:f,placeholder:!j,summary:h,estimate:x,backgroundColor:O,components:r(s),labels:i(s)})}))}));n(m),i(x)},onError:function(e){console.log(e)},style:{dropArea:{margin:"20px"}},config:{},addRemoveButton:!0,onRemoveFile:function(e){console.log("---------------------------"),console.log(e),console.log("---------------------------")},children:Object(a.jsx)("span",{children:"Drop CSV file here or click to upload."})})})},ce=Object(l.createContext)({developmentDays:6,setDevelopmentDays:function(){}}),re=n(1712),ie=n(1697),oe=n(1698),se=n(1719),le=n(1721),de=n(1710),ue=n(1720),je=n(1715),be={key:"",name:"",placeholder:!1,estimate:""};var fe=function(e){var t=e.onClose,n=e.open,c=Object(l.useState)(be),r=Object(f.a)(c,2),i=r[0],o=r[1],d=Object(l.useState)("Task Bucket"),u=Object(f.a)(d,2),j=u[0],b=u[1],h=Object(l.useContext)(Y),p=h.rows,x=h.setRows;return Object(l.useEffect)((function(){!1===n&&(o(be),b("Task Bucket"))}),[n]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(y.a,{onClose:t,open:n,children:[Object(a.jsx)(C.a,{children:"New Task"}),Object(a.jsx)(k.a,{children:Object(a.jsxs)("div",{style:{display:"grid",padding:"20px"},children:[Object(a.jsx)(je.a,{label:"Key",variant:"outlined",type:"text",value:i.key,onChange:function(e){o(Object(O.a)(Object(O.a)({},i),{},{key:e.target.value}))}}),Object(a.jsx)(oe.a,{label:"Is Placeholder",control:Object(a.jsx)(re.a,{checked:i.placeholder,onChange:function(e){o(Object(O.a)(Object(O.a)({},i),{},{placeholder:e.target.checked}))}})}),Object(a.jsx)(I.a,{gutterBottom:!0,children:"Estimate"}),Object(a.jsx)(ue.a,{value:i.estimate,onChange:function(e,t){o(Object(O.a)(Object(O.a)({},i),{},{estimate:t}))},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:.5,marks:!0,min:0,max:6}),Object(a.jsxs)(ie.a,{children:[Object(a.jsx)(se.a,{id:"task-assignee-select-label",children:"Assignee"}),Object(a.jsx)(de.a,{labelId:"task-assignee-select-label",id:"task-assignee-select",value:j,onChange:function(e){b(e.target.value)},children:p.filter((function(e){return e.id})).map((function(e){return Object(a.jsx)(le.a,{value:e.name,children:e.name},e.id)}))})]}),Object(a.jsx)(G.a,{startIcon:Object(a.jsx)(_.a,{}),onClick:function(){var e=Object(s.a)(p,(function(e){var t=e.findIndex((function(e){return e.name===j}));e[t].list.push({id:Object(L.a)(),custom:!0,key:i.key,placeholder:i.placeholder,summary:"",estimate:i.estimate,backgroundColor:void 0,components:[],labels:[]})}));x(e),t()},children:"Add Task"})]})})]})})},Oe=n(130),he=n.n(Oe),pe=n(1708),xe=n(92),me=n(173),ge=n.n(me),ve=n(174),ye=n.n(ve),ke=Object(l.createContext)({workingDates:[],setWorkingDates:function(){}});function Ce(e,t,n){var a=Object(l.useState)((function(){var a=localStorage.getItem(e);if(!a)return t;var c=JSON.parse(a);return n?n(c):c})),c=Object(f.a)(a,2),r=c[0],i=c[1];return Object(l.useEffect)((function(){localStorage.setItem(e,JSON.stringify(r))}),[e,r]),[r,i]}var De=function(e){var t=e.onClose,n=e.open,c=Object(l.useState)(10),r=Object(f.a)(c,2),i=r[0],o=r[1],d=Ce("developmentRatio",.6),u=Object(f.a)(d,2),j=u[0],b=u[1],O=Object(l.useState)([]),h=Object(f.a)(O,2),p=h[0],x=h[1],m=Object(l.useContext)(Y),g=m.rows,v=m.setRows,S=Object(l.useContext)(ke),w=S.workingDates,B=S.setWorkingDates,F=ye()(w)||new Date,P=Object(l.useState)(F),T=Object(f.a)(P,2),A=T[0],M=T[1],W=Object(l.useContext)(ce).setDevelopmentDays;return Object(l.useEffect)((function(){B(function(e,t,n){for(var a=!0,c=0,r=[],i=function(){var i=Object(E.a)(e,c),o=n.some((function(e){return Object(xe.a)(e.value,i)}));Object(R.a)(i)||o||r.push(i),c+=1,r.length>=t&&(a=!1)};a;)i();return r}(A,i,p))}),[A,i,p]),Object(l.useEffect)((function(){W(i*j)}),[i,j]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(y.a,{onClose:t,open:n,children:[Object(a.jsx)(C.a,{children:"Settings"}),Object(a.jsx)(k.a,{children:Object(a.jsxs)("div",{style:{display:"grid",padding:"20px"},children:[Object(a.jsx)(pe.a,{margin:"normal",id:"date-picker-dialog",label:"Select start date",format:"dd/MM/yyyy",value:A,onChange:M,KeyboardButtonProps:{"aria-label":"change date"}}),Object(a.jsx)(je.a,{label:"Sprint Days",variant:"outlined",type:"number",value:i,onChange:function(e){o(parseInt(e.target.value,10))}}),Object(a.jsx)(I.a,{gutterBottom:!0,children:"Development Ratio"}),Object(a.jsx)(ue.a,{value:j,onChange:function(e,t){b(t)},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:.1,marks:!0,min:.1,max:1}),Object(a.jsx)(I.a,{gutterBottom:!0,children:"Off Days"}),p.filter((function(e){return!!e.id})).map((function(e){return Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)(pe.a,{margin:"normal",id:"date-picker-dialog",label:"Select date",format:"dd/MM/yyyy",value:e.value,onChange:function(t){!function(e,t){var n=Object(s.c)(p,(function(n){var a=n.findIndex((function(t){return t.id===e}));n[a].value=t}));x(n)}(e.id,t)},KeyboardButtonProps:{"aria-label":"change date"}}),Object(a.jsx)(D.a,{"aria-label":"remove",onClick:function(){!function(e){var t=Object(s.c)(p,(function(t){var n=t.findIndex((function(t){return t.id===e}));t.splice(n,1)}));x(t)}(e.id)},children:Object(a.jsx)(he.a,{})})]},e.id)})),Object(a.jsx)(G.a,{startIcon:Object(a.jsx)(_.a,{}),onClick:function(){var e=Object(s.c)(p,(function(e){e.splice(p.length-1,0,{id:Object(L.a)(),value:null})}));x(e)},children:"Add Off Days"}),Object(a.jsx)(I.a,{gutterBottom:!0,children:"Developers"}),g.filter((function(e){return!!e.developer})).map((function(e){return Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)(je.a,{variant:"outlined",value:e.name,onChange:function(t){!function(e,t){var n=Object(s.c)(g,(function(n){var a=n.findIndex((function(t){return t.id===e}));n[a].name=t}));v(n)}(e.id,t.target.value)}}),Object(a.jsx)(D.a,{"aria-label":"remove",onClick:function(){!function(e){var t=Object(s.c)(g,(function(t){var n=t.findIndex((function(t){return t.id===e}));if(-1!==n){var a=t.find((function(e){return"Task Bucket"===e.name}));t[n].list.forEach((function(e){return a.list.push(e)})),t.splice(n,1)}}));v(t)}(e.id)},children:Object(a.jsx)(he.a,{})})]},e.id)})),Object(a.jsx)(G.a,{startIcon:Object(a.jsx)(_.a,{}),onClick:function(){var e=Object(s.c)(g,(function(e){e.splice(g.length-1,0,{id:Object(L.a)(),name:ge.a.name.findName(),developer:!0,list:[]})}));v(e)},children:"Add Developer"})]})})]})})},Ie=n(1700),Se=n(7),we=Object(Se.a)((function(){return{badge:{right:18,top:13,border:"2px solid black",padding:"0 4px"}}}))(Ie.a),Be="#cbdadb",Fe=function(e,t){for(var n=1,a=e;n<=t;)a=Object(E.a)(a,1),Object(R.a)(a)||(n+=1);return a},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Be,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return Object(O.a)({userSelect:"none",padding:"0 0 0 0",margin:0,boxShadow:"#302828 0px 0px 2px 0px inset",textAlign:"center",minWidth:100*n,maxWidth:100*n,display:"grid",background:t},e)},Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(O.a)({background:e?"lightblue":"lightgrey",display:"flex",padding:8,minHeight:36,margin:"0 0 0 10px",width:"100%"},t)};var Re=function(){var e=Ce("rows",[{id:Object(L.a)(),name:"Task Bucket",developer:!1,list:[],style:{flexWrap:"wrap"}}]),t=Object(f.a)(e,2),n=t[0],c=t[1],r=Object(l.useState)([]),i=Object(f.a)(r,2),o=i[0],d=i[1],u=Object(l.useState)({open:!1,title:"",content:""}),j=Object(f.a)(u,2),S=j[0],B=j[1],E=Ce("workingDates",[],(function(e){return e.map((function(e){return new Date(e)}))})),R=Object(f.a)(E,2),T=R[0],M=R[1],G=Object(l.useState)(6),z=Object(f.a)(G,2),J=z[0],_=z[1],q=Object(l.useState)(!1),H=Object(f.a)(q,2),K=H[0],Q=H[1],V=Object(l.useState)(!1),Z=Object(f.a)(V,2),U=Z[0],ee=Z[1],te=Object(l.useMemo)((function(){return{rows:n,setRows:c}}),[n]),ne=Object(l.useMemo)((function(){return{links:o,setLinks:d}}),[o]),re=Object(l.useMemo)((function(){return{workingDates:T,setWorkingDates:M}}),[T]),ie=Object(l.useMemo)((function(){return{developmentDays:J,setDevelopmentDays:_}}),[J]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X.Provider,{value:ne,children:Object(a.jsx)(Y.Provider,{value:te,children:Object(a.jsx)(ae,{})})}),Object(a.jsx)($,{handleSettings:function(){Q(!0)},handleGenerateReport:function(){var e=n.filter((function(e){return"Task Bucket"!==e.name})).reduce((function(e,t){for(var n=function(n,a){var c=void 0;0===n?c=Object(f.a)(T,1)[0]:c=e.find((function(e){return e.id===t.list[n-1].id})).releaseDate;var r=t.list[n],i=!!r.key.match(/^[A-Z]+-\d+$/);e.push({id:r.id,key:r.key,releaseDate:Fe(c,r.estimate),canAppearInReport:!r.placeholder&&i})},a=0,c=t.list.length;a<c;a++)n(a);return e}),[]),t=W()(e.filter((function(e){return e.canAppearInReport})),"releaseDate"),c=Object.keys(t).sort((function(e,t){return new Date(e)-new Date(t)})).map((function(e){var n=t[e].filter((function(e){return!e.placeholder}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("span",{children:[Object(P.a)(new Date(e),"do MMM"),":"]}),Object(a.jsx)("ol",{children:n.map((function(e){return Object(a.jsx)("li",{children:"https://altayerdigital.atlassian.net/browse/".concat(e.key)},e.key)}))})]})}));B({open:!0,title:"Task Grouped By Release Date",content:c})},takeScreenshot:function(){var e=document.getElementById("screenshot");A()(e,{backgroundColor:null,allowTaint:!0,scale:2}).then((function(e){e.toBlob((function(e){return navigator.clipboard.write([new ClipboardItem({"image/png":e})])})),B({open:!0,title:"Screenshot copied to clipboard"})}))},handleNewTask:function(){ee(!0)}}),Object(a.jsxs)(y.a,{onClose:function(){B({open:!1,title:"",content:""})},open:S.open,children:[Object(a.jsx)(C.a,{children:S.title}),Object(a.jsx)(k.a,{children:S.content})]}),Object(a.jsx)(ke.Provider,{value:re,children:Object(a.jsx)(ce.Provider,{value:ie,children:Object(a.jsx)(Y.Provider,{value:te,children:Object(a.jsx)(De,{onClose:function(){Q(!1)},open:K})})})}),Object(a.jsx)(Y.Provider,{value:te,children:Object(a.jsx)(fe,{onClose:function(){ee(!1)},open:U})}),Object(a.jsxs)("div",{style:{width:"fit-content"},id:"screenshot",children:[Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)("div",{style:{minWidth:180,minHeight:"50px"}}),Object(a.jsx)(p.a,{style:Pe(),children:T.map((function(e,t){return Object(a.jsx)(m.a,{style:Ee({},t<J?"#99B898":"#f8fbff",1),children:Object(P.a)(e,"do MMM")},e)}))})]}),Object(a.jsx)(N.a,{onDragEnd:function(e){var t=e.source,a=e.destination;if(a){var r=Object(s.c)(n,(function(e){var n=e.findIndex((function(e){return e.id===a.droppableId})),c=e.findIndex((function(e){return e.id===t.droppableId})),r=e[c],i=e[n],o=r.list.splice(t.index,1),s=Object(f.a)(o,1)[0];i.list.splice(a.index,0,s)}));c(r)}},children:n.map((function(e){var t=e.list.filter((function(e){return-1===e.labels.indexOf("tech")})).reduce((function(e,t){return e+(t.placeholder?0:t.estimate)}),0);return Object(a.jsxs)("div",{style:{display:"flex",marginTop:"10px"},children:[Object(a.jsx)(we,{badgeContent:t,color:t>J?"error":"primary",children:Object(a.jsx)(p.a,{style:{minWidth:180,background:"#f8fbff"},children:Object(a.jsx)(m.a,{children:e.name})})}),Object(a.jsx)(N.c,{droppableId:e.id,direction:"horizontal",children:function(t,r){return Object(a.jsxs)("div",Object(O.a)(Object(O.a)({ref:t.innerRef,style:Pe(r.isDraggingOver,e.style)},t.droppableProps),{},{children:[e.list.map((function(t,r){return Object(a.jsx)(N.b,{draggableId:t.id,index:r,children:function(i){return Object(a.jsx)(we,{badgeContent:t.placeholder?null:t.estimate,color:"primary",children:Object(a.jsxs)(p.a,Object(O.a)(Object(O.a)(Object(O.a)({ref:i.innerRef},i.draggableProps),i.dragHandleProps),{},{style:Ee(i.draggableProps.style,t.backgroundColor,t.estimate),children:[Object(a.jsx)(g.a,{subheader:t.placeholder?"":t.key,style:{maxWidth:"".concat(100*t.estimate,"px"),padding:"16px 4px 0 4px"}}),Object(a.jsx)(m.a,{style:{maxWidth:"".concat(100*t.estimate,"px"),padding:"0 4px 0 4px"},children:Object(a.jsx)(I.a,{variant:"body2",color:"textSecondary",component:"p",style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:t.summary})}),Object(a.jsxs)(x.a,{disableSpacing:!0,style:{maxWidth:"".concat(100*t.estimate,"px"),padding:"0 4px 0 4px"},children:[Object(a.jsx)(D.a,{size:"small",onClick:function(){!function(e,t){var a=Object(s.c)(n,(function(n){n.find((function(t){return t.id===e})).list.splice(t,1)}));c(a)}(e.id,r)},children:Object(a.jsx)(w.a,{})}),!t.placeholder&&Object(a.jsx)(D.a,{size:"small",onClick:function(){!function(e){var t=o.filter((function(t){return t.key===e.key})),n=W()(t,"text");B({open:!0,title:e.custom?e.key:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(h.a,{href:"https://altayerdigital.atlassian.net/issues/?jql=id%20%3D%20".concat(e.key),underline:"hover",target:"_blank",rel:"noopener",children:e.key},e.key)," - ",Object(a.jsx)(h.a,{href:"https://altayerdigital.atlassian.net/issues/?jql=id%20%3D%20".concat(e.parentId),underline:"hover",target:"_blank",rel:"noopener",variant:"subtitle2",children:"Parent Issue"},e.parentId)]}),content:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(I.a,{variant:"body1",gutterBottom:!0,children:e.summary}),t.length>0&&Object(a.jsx)(a.Fragment,{children:Object.entries(n).map((function(e){var t=Object(f.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(I.a,{variant:"subtitle2",children:[n,":"]}),c.map((function(e){return Object(a.jsx)(h.a,{href:"https://altayerdigital.atlassian.net/browse/".concat(e.issue),underline:"hover",target:"_blank",rel:"noopener",children:e.issue},e.issue)}))]})}))})]})})}(t)},children:Object(a.jsx)(F.a,{})}),!t.placeholder&&[].concat(Object(b.a)(t.components),Object(b.a)(t.labels)).map((function(e){return Object(a.jsx)(v.a,{label:e,variant:"outlined",size:"small"},"".concat(t.id,":").concat(e))}))]})]}))})}},t.id)})),t.placeholder]}))}})]},e.id)}))})]})]})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1722)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Ae=n(107),Me=n(179),We=Object(Me.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Ae.a.A400},background:{default:"#fff"}}});Object(s.b)(),j.a.render(Object(a.jsxs)(d.a.StrictMode,{children:[Object(a.jsxs)(i.a,{theme:We,children:[Object(a.jsx)(r.a,{}),Object(a.jsx)(o.a,{utils:c.a,children:Object(a.jsx)(Re,{})})]}),","]}),document.getElementById("root")),Te()},204:function(e,t,n){},295:function(e,t,n){},310:function(e,t){},312:function(e,t){}},[[1653,1,2]]]);
//# sourceMappingURL=main.50977a4c.chunk.js.map